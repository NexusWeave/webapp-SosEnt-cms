@use 'sass:map';
@use '../colors/colors' as color

@use '../mappings/tags' as tags
@use '../mappings/icons' as icon
@use '../mappings/flexbox' as flexbox-mapping
@use '../mappings/devices-breakpoints' as devices

@mixin grid-layout()
    @include media-queries($breakpoint: 'M')
        font-size: 1.3em

    @include media-queries($breakpoint: 'L')
        gap: 1em
        display: grid
        grid-template-areas: "content cta"
        grid-template-columns: minmax(0, 2fr) minmax(0, 1fr)

    @include media-queries($breakpoint: 'XXL')
        grid-template-areas: "image content cta"
        grid-template-columns: minmax(0, 1fr) minmax(0, 2fr) minmax(0, 1fr)
        //box-shadow: 0 0 10px rgba(color.$Groovy-brown, .2)
    
    .main-grid
        grid-area: content

    .main-grid, .aside-grid
        @include media-queries($breakpoint: 'XXL')
            text-align: justify
    
    .aside-grid
        overflow: hidden
        @include media-queries($breakpoint: 'L')
            block-size: 0
            grid-area: cta
            overflow: visible
            max-inline-size: 24em

    .figure-grid
        grid-row: auto
        grid-area: image

    grid-template-rows: 100%
    grid-template-columns: 1fr
    grid-template-areas: "content"

@mixin media-queries ($size: null, $breakpoint: null)

    @if $breakpoint == 'prefers-color-scheme' and $size == null
        @media (prefers-color-scheme: dark)
            @content

    @else if $breakpoint == 'S' or $breakpoint == 'M' or $breakpoint == 'L' or $breakpoint == 'XL' or $breakpoint == '2XL' or $breakpoint == '3XL'
        $size: map.get(devices.$breakpoints, $breakpoint)
        @media screen and (min-width: $size)
            @content

    @else if $size == null and $breakpoint != null
        $block-size: map.get(devices.$devices, $breakpoint, 'block-size')
        $inline-size: map.get(devices.$devices, $breakpoint, 'inline-size')

        @media screen and ($inline-size <= width <= $inline-size + 50px ) and (min-height: $block-size) and (orientation: portrait)
            @content

        @media screen and ($block-size <= height <= $block-size + 50px) and (min-width: $inline-size) and (orientation: landscape)
            @content

    @if $size != null and $breakpoint == null
        @media screen and (min-width: $size)
            @content

@mixin apply-theme-colors($bg-color, $border, $text-color)
    h1, h2
        font-weight: 600
    
    h1
        @include media-queries($breakpoint: 'M')
            font-size: 4em

    h3 > a
            font-size: 1.5em
            font-weight: bold
    
    border: $border
    color: $text-color
    border-radius: 0.5em
    background-color: $bg-color

@mixin component-theme($border-color, $pad-block: .3em, $font-size: 1em)

    p
        font-size: $font-size
        padding-block-start: $pad-block

    h1, h2, h3, h4, h5, h6
        font-weight: bold
        padding-block-start: $pad-block
   
    .icon
        color: $border-color

    border-radius: 0.5em

@mixin base-btn($border-color)
    margin: 0.5em
    font-size: 1em
    font-weight: bold
    padding: 0.5em 1em
    border-radius: 0.5em
    border: 1px solid $border-color

@mixin link-color($color, $color-hover, $color-active, $color-visited)

    a
        [aria-disabled="true"]
            color: #a0a0a0
            cursor: not-allowed
            pointer-events: none
            text-decoration: none
        &:active
            color: $color-active
        
        &.external-link
            text-decoration: underline

        @media (hover: hover)

            &:hover
                color: $color-hover
                border-radius: 0.5em

        h1, h2, h3, h4, h5, h6
            color: $color !important

        color: $color
        text-decoration: none

@mixin background-color($bg-color, $text-color)

    color: rgba($text-color, 1)
    background-color: rgba($bg-color, 1)

@mixin font($size, $font-family: 'Nunito', $line-height: null)

    @if $line-height == null
        $line-height: 1.6

    @if $font-family == null
        $font-family: 'Nunito', sans-serif


    font-size: $size
    font-family: $font-family
    line-height: $line-height

@mixin transitions($property: null, $duration: null, $timing-function: null)

    @if $property == null
        $property: all
    
    @if $timing-function == null
        $timing-function: ease-in-out

    @if $duration == null
        $duration: 0.3s

    transition: $property $duration $timing-function
    -o-transition: $property $duration $timing-function
    -moz-transition: $property $duration $timing-function
    -webkit-transition: $property $duration $timing-function

@mixin flexbox-generator($flexbox-type)
    
    $props: map.get(flexbox-mapping.$flexbox, $flexbox-type)

    @if $props
        @each $property, $value in $props
            #{$property}: $value
    @else
        @error '"#{$flexbox-type}" not found in flexbox mapping.'

@mixin icon-generator()

    @each $name, $group in icon.$icons
        @each $icon, $prop in $group
            .#{$icon}
                i
                    font-style: normal

                .icon
                    &::before
                        padding: 0.5em
                        content: map.get($prop, icon)
                        color : map.get($prop, icon-color)

                    font-size: 1em
                    display: inline-block

                font-family: "Bootstrap-icons"
                
@mixin tag-generator()

    @each $tag, $props in tags.$tags
        .#{$tag}
            margin-inline: 1em
            padding: 0.5em 0.5em
            border-radius: 0.5em
            display: inline-block
            @include background-color(map.get($props, bg-color), map.get($props, txt-color))
            @include link-color( map.get($props, link-color), map.get($props, hover-color), map.get($props, active-color), map.get($props, visited-color))

        span.tags
            font-size: 0.7em
            font-weight: bold

@mixin input-generator($border-color)

    @each $type, $props in icon.$inputs
        @if $type == 'inputControls'
            @each $input in $props
                input[type="#{$input}"]
                    block-size: 2em
                    padding-block: 1em
                    padding-inline: 2em
                    border-radius: 0.5em
                    border: 1px solid $border-color

@mixin button-pallette($bg-color, $text-color, $border-color: null)

    @if $border-color == null
        border: none
    @else
        border: 1px solid $border-color

    margin: 0.5em
    font-size: 1em
    cursor: pointer
    font-weight: bold
    padding: 0.5em 1em
    border-radius: 0.5em
    display: inline-block
    @include background-color($bg-color, $text-color)
